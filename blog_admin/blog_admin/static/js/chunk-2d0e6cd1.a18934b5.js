(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6cd1"],{"99fa":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-button",{staticClass:"add_button",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openAddWindow()}}},[e._v("添加")]),i("audio",{attrs:{src:e.musicUrl,autoplay:e.autoplay,controls:"controls"}}),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.musicList,border:""},on:{"sort-change":e.changeSort}},[i("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),i("el-table-column",{attrs:{prop:"name",label:"歌曲名",width:"180","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"artist",label:"歌手",width:"180"}}),i("el-table-column",{attrs:{prop:"cover",label:"封面",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("div",{staticClass:"demo-image__preview"},[i("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e.row.cover,"preview-src-list":[e.row.cover]}})],1)]}}])}),i("el-table-column",{attrs:{prop:"enable",label:"启用状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enable?i("el-tag",[e._v("启用")]):i("el-tag",{attrs:{type:"warning"}},[e._v("未启用")])]}}])}),i("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"enable",fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-dropdown",[i("el-button",{attrs:{type:"primary",size:"mini",round:""}},[e._v(" 操作 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-button",{staticStyle:{"margin-left":"18px","margin-bottom":"3px"},attrs:{type:"primary",size:"mini",round:""},on:{click:function(i){return e.openUpdateWindow(t.row.id)}}},[e._v("编辑")]),i("el-dropdown-item",[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(i){return e.listenMusic(t.row.url)}}},[e._v("试听")])],1),i("el-dropdown-item",[0===t.row.enable?i("el-button",{attrs:{type:"success",size:"mini",round:""},on:{click:function(i){return e.enable(t.row.id)}}},[e._v("启用")]):i("el-button",{attrs:{type:"warning",round:"",size:"mini"},on:{click:function(i){return e.disable(t.row.id)}}},[e._v("弃用")])],1),i("el-dropdown-item",[i("el-button",{attrs:{type:"danger",size:"mini",round:""},on:{click:function(i){return e.deleteById(t.row.id)}}},[e._v("删除")])],1)],1)],1)]}}])})],1),i("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("MusicAdd",{on:{closeAddWindow:e.closeAddWindow,getMusicList:e.getMusicList}})],1),i("el-dialog",{attrs:{title:"更新",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[i("music-update",{attrs:{music:e.music},on:{closeUpdateWindow:e.closeUpdateWindow,getMusicList:e.getMusicList}})],1),i("el-pagination",{attrs:{"current-page":e.page.pageNUm,"page-sizes":[5,10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.music.total,z:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},a=[],n=i("b775"),o="music",l={save:function(e){return Object(n["a"])({url:"/".concat(o,"/save"),method:"post",data:e})},update:function(e){return Object(n["a"])({url:"/".concat(o,"/update"),method:"put",data:e})},getPage:function(e){return Object(n["a"])({url:"/".concat(o,"/getPage"),method:"post",data:e})},delete:function(e){return Object(n["a"])({url:"/".concat(o,"/delete/").concat(e),method:"delete"})},getById:function(e){return Object(n["a"])({url:"/".concat(o,"/getById/").concat(e),method:"get"})},enable:function(e){return Object(n["a"])({url:"/".concat(o,"/enable/").concat(e),method:"put"})},disable:function(e){return Object(n["a"])({url:"/".concat(o,"/disable/").concat(e),method:"put"})}},c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.music,"label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"歌曲名"}},[i("el-input",{model:{value:e.music.name,callback:function(t){e.$set(e.music,"name",t)},expression:"music.name"}})],1),i("el-form-item",{attrs:{label:"歌手"}},[i("el-input",{model:{value:e.music.artist,callback:function(t){e.$set(e.music,"artist",t)},expression:"music.artist"}})],1),i("el-form-item",{attrs:{label:"封面"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.uploadSuccess,headers:e.headers}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{label:"上传歌曲"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-success":e.uploadMusicSuccess,limit:1,"file-list":e.fileList,headers:e.headers}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),i("el-form-item",{attrs:{label:"歌词"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.music.lrc,callback:function(t){e.$set(e.music,"lrc",t)},expression:"music.lrc"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("添加")]),i("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取消")])],1)],1)],1)},r=[],u=i("5f87"),d={data:function(){return{music:{},imageUrl:null,headers:{Authorization:Object(u["a"])()},uploadUrl:"/prod/upload/uploadImage",fileList:[]}},methods:{onSubmit:function(){var e=this;l.save(this.music).then((function(t){e.$message.success(t.msg),e.music={},e.imageUrl=null,e.fileList=[],e.$emit("getMusicList"),e.$emit("closeAddWindow")}))},close:function(){this.$emit("closeAddWindow")},uploadSuccess:function(e,t){this.$message.success(e.msg),this.imageUrl=e.data,this.music.cover=e.data},uploadMusicSuccess:function(e,t,i){this.$message.success(e.msg),this.music.url=e.data}}},m=d,p=i("2877"),h=Object(p["a"])(m,c,r,!1,null,null,null),g=h.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.music,"label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"歌曲名"}},[i("el-input",{model:{value:e.music.name,callback:function(t){e.$set(e.music,"name",t)},expression:"music.name"}})],1),i("el-form-item",{attrs:{label:"歌手"}},[i("el-input",{model:{value:e.music.artist,callback:function(t){e.$set(e.music,"artist",t)},expression:"music.artist"}})],1),i("el-form-item",{attrs:{label:"封面"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.uploadSuccess,headers:e.headers}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{label:"上传歌曲"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-success":e.uploadMusicSuccess,limit:1,"file-list":e.fileList,headers:e.headers}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),i("el-form-item",{attrs:{label:"歌词"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.music.lrc,callback:function(t){e.$set(e.music,"lrc",t)},expression:"music.lrc"}})],1),i("el-form-item",[i("el-button",{attrs:{music:"primary"},on:{click:function(t){return e.updatemusic()}}},[e._v("更新")]),i("el-button",{on:{click:function(t){return e.closeWindow()}}},[e._v("取消")])],1)],1)],1)},b=[],w=(i("b0c0"),{props:{music:{type:Object,default:null}},data:function(){return{imageUrl:this.music.cover,headers:{Authorization:Object(u["a"])()},uploadUrl:"/prod/upload/uploadImage",fileList:[{name:this.music.name,url:this.music.url}]}},watch:{"music.musicImage":function(e,t){this.imageUrl=e},"music.url":function(e,t){this.src=e}},methods:{updatemusic:function(){var e=this;l.update(this.music).then((function(t){e.$message.success(t.msg),e.closeWindow(),e.$emit("getMusicList")}))},closeWindow:function(){this.$emit("closeUpdateWindow"),this.imageUrl=null},uploadSuccess:function(e,t){this.$message.success(e.msg),this.imageUrl=e.data,this.music.cover=e.data},uploadMusicSuccess:function(e,t,i){this.$message.success(e.msg),this.music.url=e.data}}}),v=w,y=Object(p["a"])(v,f,b,!1,null,null,null),M=y.exports,_={components:{MusicAdd:g,MusicUpdate:M},data:function(){return{page:{pageNum:1,pageSize:4,orderByField:"created_time",orderByMode:"desc"},music:{},musicList:[],dialogFormVisible:!1,drawer:!1,readWindow:!1,autoplay:!0,musicUrl:""}},created:function(){this.getMusicList()},methods:{getMusicList:function(){var e=this;l.getPage(this.page).then((function(t){e.musicList=t.data.list}))},deleteById:function(e){var t=this;l.delete(e).then((function(e){t.$message.success(e.msg),t.getMusicList()}))},openAddWindow:function(){this.dialogFormVisible=!0},closeAddWindow:function(){this.dialogFormVisible=!1},openUpdateWindow:function(e){var t=this;l.getById(e).then((function(e){t.music=e.data,t.drawer=!0}))},closeUpdateWindow:function(){this.drawer=!1},openReadWindow:function(e){var t=this;this.readWindow=!0,l.getById(e).then((function(e){t.content=e.data.musicContent}))},closeReadWindow:function(e){this.readWindow=!1},handleSizeChange:function(e){this.page.pageSize=e,this.getMusicList()},handleCurrentChange:function(e){this.page.pageNum=e,this.getMusicList()},enable:function(e){var t=this;l.enable(e).then((function(e){t.$message.success(e.msg),t.getMusicList()}))},disable:function(e){var t=this;l.disable(e).then((function(e){t.$message.success(e.msg),t.getMusicList()}))},changeSort:function(e){this.page.orderByField=e.prop,this.page.orderByMode=e.order,null===this.page.orderByField&&(this.page.orderByField="created_time"),null===this.page.orderByMode&&(this.page.orderByMode="desc"),"ascending"===this.page.orderByMode&&(this.page.orderByMode="asc"),"descending"===this.page.orderByMode&&(this.page.orderByMode="desc"),this.getMusicList()},listenMusic:function(e){this.musicUrl=e}}},U=_,z=Object(p["a"])(U,s,a,!1,null,null,null);t["default"]=z.exports}}]);